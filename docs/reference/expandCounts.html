<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Repeat individual fish data, including lengths, from tallied counts and, optionally, add a random digit to length measurements to simulate actual length of fish in the bin. This is useful as a precursor to summaries that require information, e.g., lengths, of individual fish (e.g., length frequency histograms, means lengths)."><title>Repeat individual fish data (including lengths) from tallied counts. — expandCounts • FSA</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Repeat individual fish data (including lengths) from tallied counts. — expandCounts"><meta property="og:description" content="Repeat individual fish data, including lengths, from tallied counts and, optionally, add a random digit to length measurements to simulate actual length of fish in the bin. This is useful as a precursor to summaries that require information, e.g., lengths, of individual fish (e.g., length frequency histograms, means lengths)."><meta property="og:image" content="https://fishr-core-team.github.io/FSA/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FSA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.9.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fa fa-newspaper"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/fishR-Core-Team/FSA">
    <span class="fa fa-github fa"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Repeat individual fish data (including lengths) from tallied counts.</h1>
      <small class="dont-index">Source: <a href="https://github.com/fishR-Core-Team/FSA/blob/HEAD/R/expandCounts.R" class="external-link"><code>R/expandCounts.R</code></a></small>
      <div class="d-none name"><code>expandCounts.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Repeat individual fish data, including lengths, from tallied counts and, optionally, add a random digit to length measurements to simulate actual length of fish in the bin. This is useful as a precursor to summaries that require information, e.g., lengths, of individual fish (e.g., length frequency histograms, means lengths).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">expandCounts</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">cform</span>,</span>
<span>  lform <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  removeCount <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lprec <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  new.name <span class="op">=</span> <span class="st">"newlen"</span>,</span>
<span>  cwid <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data.frame that contains variables in <code>cform</code> and <code>lform</code>.</p></dd>


<dt>cform</dt>
<dd><p>A formula of the form <code>~countvar</code> where <code>countvar</code> generically represents the variable in <code>data</code> that contains the counts of individuals. See details.</p></dd>


<dt>lform</dt>
<dd><p>An optional formula of the form <code>~lowerbin+upperbin</code> where <code>lowerbin</code> and <code>upperbin</code> generically represent the variables in <code>data</code> that identify the lower- and upper-values of the length bins. See details.</p></dd>


<dt>removeCount</dt>
<dd><p>A single logical that indicates if the variable that contains the counts of individuals (as given in <code>cform</code>) should be removed form the returned data.frame. The default is <code>TRUE</code> such that the variable will be removed as the returned data.frame contains individuals and the counts of individuals in tallied bins is not relevant to an individual.</p></dd>


<dt>lprec</dt>
<dd><p>A single numeric that controls the precision to which the random lengths are recorded. See details.</p></dd>


<dt>new.name</dt>
<dd><p>A single string that contains a name for the new length variable if random lengths are to be created.</p></dd>


<dt>cwid</dt>
<dd><p>A single positive numeric that will be added to the lower length bin value in instances where the count exceeds one but only a lower (and not an upper) length were recorded. See details.</p></dd>


<dt>verbose</dt>
<dd><p>A logical indicating whether progress message should be printed or not.</p></dd>


<dt>...</dt>
<dd><p>Not yet implemented.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data.frame of the same structure as <code>data</code> except that the variable in <code>cform</code> may be deleted and the variable in <code>new.name</code> may be added. The returned data.frame will have more rows than <code>data</code> because of the potential addition of new individuals expanded from the counts in <code>cform</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Fisheries data may be recorded as tallied counts in the field. For example, field biologists may have simply recorded that there were 10 fish in one group, 15 in another, etc. More specifically, the biologist may have recorded that there were 10 male Bluegill from the first sampling event between 100 and 124 mm, 15 male Bluegill from the first sampling event between 125 and 149 mm, and so on. At times, it may be necessary to expand these counts such that the repeated information appears in individual rows in a new data.frame. In this specific example, the tallied counts would be repeated such that the male, Bluegill, first sampling event, 100-124 mm information would be repeated 10 times; the male, Bluegill, first sampling event, 125-149 mm information would be repeated 15 times, and so on. This function facilitates this type of expansion.</p>
<p>Length data has often been collected in a “binned-and-tallied” format (e.g., 10 fish in the 100-124 mm group, 15 in the 125-149 mm group, etc.). This type of data collection does not facilitate easy or precise calculations of summary statistics of length (i.e., mean and standard deviations of length). Expanding the data as described above does not solve this problem because the length data are still essentially categorical (i.e., which group the fish belongs to rather than what it's actual length is). To facilitate computation of summary statistics, the data can be expanded as described above and then a length can be randomly selected from within the recorded length bin to serve as a “measured” length for that fish. This function performs this type of expansion by randomly selecting the length from a uniform distribution within the length bin (e.g., each value between 100 and 124 mm has the same probability of being selected).</p>
<p>This function makes some assumptions for some coding situations. First, it assumes that all <code>lowerbin</code> values are actually lower than all <code>upperbin</code> values. The function will throw an error if this is not true. Second, it assumes that if a <code>lowerbin</code> but no <code>upperbin</code> value is given then the <code>lowerbin</code> value is the exact measurement for those fish. Third, it assumes that if an <code>upperbin</code> but no <code>lowerbin</code> value is given that this is a data entry error and that the <code>upperbin</code> value should be the <code>lowerbin</code> value. Fourth, it assumes that it is a data entry error if <code>varcount</code> is zero or <code>NA</code> and <code>lowerbin</code> or <code>upperbin</code> contains values (i.e., why would there be lengths if no fish were captured?).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>See <code><a href="expandLenFreq.html">expandLenFreq</a></code> for expanding length frequencies where individual fish measurements were made on individual fish in a subsample and the remaining fish were simply counted.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Derek H. Ogle, <a href="mailto:DerekOgle51@gmail.com">DerekOgle51@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># all need expansion</span></span></span>
<span class="r-in"><span><span class="op">(</span> <span class="va">d1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>name<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Johnson"</span>,<span class="st">"Johnson"</span>,<span class="st">"Jones"</span>,<span class="st">"Frank"</span>,<span class="st">"Frank"</span>,<span class="st">"Max"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   lwr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">15.5</span>,<span class="fl">16</span>,<span class="fl">16</span>,<span class="fl">17</span>,<span class="fl">17</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   upr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15.5</span>,<span class="fl">16</span>,<span class="fl">16.5</span>,<span class="fl">16.5</span>,<span class="fl">17.5</span>,<span class="fl">17.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   freq<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      name lwr.bin upr.bin freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Johnson    15.0    15.5    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Johnson    15.5    16.0    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Jones    16.0    16.5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Frank    16.0    16.5    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Frank    17.0    17.5    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     Max    17.0    17.5    1</span>
<span class="r-in"><span><span class="fu">expandCounts</span><span class="op">(</span><span class="va">d1</span>,<span class="op">~</span><span class="va">freq</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Results messages from expandCounts():</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   2 rows had an individual measurement.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       name lwr.bin upr.bin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Frank    17.0    17.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Max    17.0    17.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Johnson    15.5    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Johnson    15.5    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Johnson    15.5    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Johnson    15.5    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   Jones    16.0    16.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   Jones    16.0    16.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   Frank    16.0    16.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   Frank    16.0    16.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   Frank    16.0    16.5</span>
<span class="r-in"><span><span class="fu">expandCounts</span><span class="op">(</span><span class="va">d1</span>,<span class="op">~</span><span class="va">freq</span>,<span class="op">~</span><span class="va">lwr.bin</span><span class="op">+</span><span class="va">upr.bin</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Results messages from expandCounts():</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   2 rows had an individual measurement.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       name lwr.bin upr.bin newlen         lennote</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Frank    17.0    17.5   17.5 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Max    17.0    17.5   17.3 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Johnson    15.0    15.5   15.0 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Johnson    15.0    15.5   15.0 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Johnson    15.0    15.5   15.4 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Johnson    15.0    15.5   15.5 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Johnson    15.0    15.5   15.5 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Johnson    15.0    15.5   15.1 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Johnson    15.5    16.0   15.8 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Johnson    15.5    16.0   15.9 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Johnson    15.5    16.0   15.7 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Johnson    15.5    16.0   15.6 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   Jones    16.0    16.5   16.1 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   Jones    16.0    16.5   16.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   Frank    16.0    16.5   16.1 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   Frank    16.0    16.5   16.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   Frank    16.0    16.5   16.5 Expanded length</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># some need expansion</span></span></span>
<span class="r-in"><span><span class="op">(</span> <span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>name<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Johnson"</span>,<span class="st">"Johnson"</span>,<span class="st">"Jones"</span>,<span class="st">"Frank"</span>,<span class="st">"Frank"</span>,<span class="st">"Max"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   lwr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">15.5</span>,<span class="fl">16</span>,<span class="fl">16</span>,<span class="fl">17.1</span>,<span class="fl">17.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   upr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15.5</span>,<span class="fl">16</span>,<span class="fl">16.5</span>,<span class="fl">16.5</span>,<span class="fl">17.1</span>,<span class="fl">17.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   freq<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      name lwr.bin upr.bin freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Johnson    15.0    15.5    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Johnson    15.5    16.0    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Jones    16.0    16.5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Frank    16.0    16.5    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Frank    17.1    17.1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     Max    17.3    17.3    1</span>
<span class="r-in"><span><span class="fu">expandCounts</span><span class="op">(</span><span class="va">d2</span>,<span class="op">~</span><span class="va">freq</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Results messages from expandCounts():</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   2 rows had an individual measurement.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       name lwr.bin upr.bin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Frank    17.1    17.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Max    17.3    17.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Johnson    15.5    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Johnson    15.5    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Johnson    15.5    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Johnson    15.5    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   Jones    16.0    16.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   Jones    16.0    16.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   Frank    16.0    16.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   Frank    16.0    16.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   Frank    16.0    16.5</span>
<span class="r-in"><span><span class="fu">expandCounts</span><span class="op">(</span><span class="va">d2</span>,<span class="op">~</span><span class="va">freq</span>,<span class="op">~</span><span class="va">lwr.bin</span><span class="op">+</span><span class="va">upr.bin</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Results messages from expandCounts():</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   2 rows had an individual measurement.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       name lwr.bin upr.bin newlen         lennote</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Frank    17.1    17.1   17.1 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Max    17.3    17.3   17.3 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Johnson    15.0    15.5   15.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Johnson    15.0    15.5   15.3 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Johnson    15.0    15.5   15.5 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Johnson    15.0    15.5   15.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Johnson    15.0    15.5   15.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Johnson    15.0    15.5   15.3 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Johnson    15.5    16.0   15.9 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Johnson    15.5    16.0   15.9 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Johnson    15.5    16.0   15.9 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Johnson    15.5    16.0   15.5 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   Jones    16.0    16.5   16.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   Jones    16.0    16.5   16.3 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   Frank    16.0    16.5   16.3 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   Frank    16.0    16.5   16.4 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   Frank    16.0    16.5   16.3 Expanded length</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># none need expansion</span></span></span>
<span class="r-in"><span><span class="op">(</span> <span class="va">d3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>name<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Johnson"</span>,<span class="st">"Johnson"</span>,<span class="st">"Jones"</span>,<span class="st">"Frank"</span>,<span class="st">"Frank"</span>,<span class="st">"Max"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   lwr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">15.5</span>,<span class="fl">16</span>,<span class="fl">16</span>,<span class="fl">17.1</span>,<span class="fl">17.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   upr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">15.5</span>,<span class="fl">16</span>,<span class="fl">16</span>,<span class="fl">17.1</span>,<span class="fl">17.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   freq<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      name lwr.bin upr.bin freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Johnson    15.0    15.0    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Johnson    15.5    15.5    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Jones    16.0    16.0    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Frank    16.0    16.0    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Frank    17.1    17.1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     Max    17.3    17.3    1</span>
<span class="r-in"><span><span class="fu">expandCounts</span><span class="op">(</span><span class="va">d3</span>,<span class="op">~</span><span class="va">freq</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Results messages from expandCounts():</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   2 rows had an individual measurement.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       name lwr.bin upr.bin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Frank    17.1    17.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Max    17.3    17.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Johnson    15.0    15.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Johnson    15.0    15.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Johnson    15.0    15.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Johnson    15.0    15.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Johnson    15.0    15.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Johnson    15.0    15.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Johnson    15.5    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Johnson    15.5    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Johnson    15.5    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Johnson    15.5    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   Jones    16.0    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   Jones    16.0    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   Frank    16.0    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   Frank    16.0    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   Frank    16.0    16.0</span>
<span class="r-in"><span><span class="fu">expandCounts</span><span class="op">(</span><span class="va">d3</span>,<span class="op">~</span><span class="va">freq</span>,<span class="op">~</span><span class="va">lwr.bin</span><span class="op">+</span><span class="va">upr.bin</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Results messages from expandCounts():</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   2 rows had an individual measurement.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       name lwr.bin upr.bin newlen         lennote</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Frank    17.1    17.1   17.1 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Max    17.3    17.3   17.3 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Johnson    15.5    15.5   15.5 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Johnson    15.5    15.5   15.5 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Johnson    15.5    15.5   15.5 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Johnson    15.5    15.5   15.5 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   Jones    16.0    16.0   16.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   Jones    16.0    16.0   16.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   Frank    16.0    16.0   16.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   Frank    16.0    16.0   16.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   Frank    16.0    16.0   16.0 Observed length</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># some need expansion, but different bin widths</span></span></span>
<span class="r-in"><span><span class="op">(</span> <span class="va">d4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>name<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Johnson"</span>,<span class="st">"Johnson"</span>,<span class="st">"Jones"</span>,<span class="st">"Frank"</span>,<span class="st">"Frank"</span>,<span class="st">"Max"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   lwr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,  <span class="fl">15</span>,  <span class="fl">16</span>,  <span class="fl">16</span>,  <span class="fl">17.1</span>,<span class="fl">17.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   upr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15.5</span>,<span class="fl">15.9</span>,<span class="fl">16.5</span>,<span class="fl">16.9</span>,<span class="fl">17.1</span>,<span class="fl">17.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   freq<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      name lwr.bin upr.bin freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Johnson    15.0    15.5    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Johnson    15.0    15.9    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Jones    16.0    16.5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Frank    16.0    16.9    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Frank    17.1    17.1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     Max    17.3    17.3    1</span>
<span class="r-in"><span><span class="fu">expandCounts</span><span class="op">(</span><span class="va">d4</span>,<span class="op">~</span><span class="va">freq</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Results messages from expandCounts():</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   2 rows had an individual measurement.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       name lwr.bin upr.bin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Frank    17.1    17.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Max    17.3    17.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Johnson    15.0    15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Johnson    15.0    15.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Johnson    15.0    15.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Johnson    15.0    15.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Johnson    15.0    15.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   Jones    16.0    16.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   Jones    16.0    16.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   Frank    16.0    16.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   Frank    16.0    16.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   Frank    16.0    16.9</span>
<span class="r-in"><span><span class="fu">expandCounts</span><span class="op">(</span><span class="va">d4</span>,<span class="op">~</span><span class="va">freq</span>,<span class="op">~</span><span class="va">lwr.bin</span><span class="op">+</span><span class="va">upr.bin</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Results messages from expandCounts():</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   2 rows had an individual measurement.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       name lwr.bin upr.bin newlen         lennote</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Frank    17.1    17.1   17.1 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Max    17.3    17.3   17.3 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Johnson    15.0    15.5   15.1 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Johnson    15.0    15.5   15.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Johnson    15.0    15.5   15.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Johnson    15.0    15.5   15.5 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Johnson    15.0    15.5   15.1 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Johnson    15.0    15.5   15.5 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Johnson    15.0    15.9   15.3 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Johnson    15.0    15.9   15.0 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Johnson    15.0    15.9   15.7 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Johnson    15.0    15.9   15.7 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   Jones    16.0    16.5   16.3 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   Jones    16.0    16.5   16.1 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   Frank    16.0    16.9   16.1 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   Frank    16.0    16.9   16.3 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   Frank    16.0    16.9   16.7 Expanded length</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># some need expansion but include zeros and NAs for counts</span></span></span>
<span class="r-in"><span><span class="op">(</span> <span class="va">d2a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>name<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Johnson"</span>,<span class="st">"Johnson"</span>,<span class="st">"Jones"</span>,<span class="st">"Frank"</span>,<span class="st">"Frank"</span>,<span class="st">"Max"</span>,<span class="st">"Max"</span>,<span class="st">"Max"</span>,<span class="st">"Max"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    lwr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,  <span class="fl">15.5</span>,<span class="fl">16</span>  ,<span class="fl">16</span>  ,<span class="fl">17.1</span>,<span class="fl">17.3</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    upr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15.5</span>,<span class="fl">16</span>  ,<span class="fl">16.5</span>,<span class="fl">16.5</span>,<span class="fl">17.1</span>,<span class="fl">17.3</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    freq<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="cn">NA</span>,<span class="fl">0</span>,<span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      name lwr.bin upr.bin freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Johnson    15.0    15.5    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Johnson    15.5    16.0    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Jones    16.0    16.5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Frank    16.0    16.5    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Frank    17.1    17.1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     Max    17.3    17.3    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     Max      NA      NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     Max      NA      NA    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     Max      NA      NA   NA</span>
<span class="r-in"><span><span class="fu">expandCounts</span><span class="op">(</span><span class="va">d2a</span>,<span class="op">~</span><span class="va">freq</span>,<span class="op">~</span><span class="va">lwr.bin</span><span class="op">+</span><span class="va">upr.bin</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Results messages from expandCounts():</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   Rows 7, 8, 9 had zero or no counts in freq.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   2 rows had an individual measurement.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       name lwr.bin upr.bin newlen         lennote</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      Max      NA      NA     NA Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Max      NA      NA     NA Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      Max      NA      NA     NA Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    Frank    17.1    17.1   17.1 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Max    17.3    17.3   17.3 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Johnson    15.0    15.5   15.1 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Johnson    15.0    15.5   15.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Johnson    15.0    15.5   15.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Johnson    15.0    15.5   15.0 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Johnson    15.0    15.5   15.1 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Johnson    15.0    15.5   15.4 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Johnson    15.5    16.0   15.6 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 Johnson    15.5    16.0   15.6 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 Johnson    15.5    16.0   15.9 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 Johnson    15.5    16.0   15.6 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   Jones    16.0    16.5   16.0 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   Jones    16.0    16.5   16.0 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   Frank    16.0    16.5   16.5 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19   Frank    16.0    16.5   16.4 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20   Frank    16.0    16.5   16.1 Expanded length</span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co"># some need expansion but include NAs for upper values</span></span></span>
<span class="r-in"><span><span class="op">(</span> <span class="va">d2b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>name<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Johnson"</span>,<span class="st">"Johnson"</span>,<span class="st">"Jones"</span>,<span class="st">"Frank"</span>,<span class="st">"Frank"</span>,<span class="st">"Max"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    lwr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,  <span class="fl">15.5</span>,<span class="fl">16</span>  ,<span class="fl">16</span>  ,<span class="fl">17.1</span>,<span class="fl">17.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    upr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>  ,<span class="cn">NA</span>  ,<span class="fl">16.5</span>,<span class="fl">16.5</span>,<span class="fl">17.1</span>,<span class="fl">17.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    freq<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      name lwr.bin upr.bin freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Johnson    15.0      NA    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Johnson    15.5      NA    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Jones    16.0    16.5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Frank    16.0    16.5    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Frank    17.1    17.1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     Max    17.3    17.3    1</span>
<span class="r-in"><span><span class="fu">expandCounts</span><span class="op">(</span><span class="va">d2b</span>,<span class="op">~</span><span class="va">freq</span>,<span class="op">~</span><span class="va">lwr.bin</span><span class="op">+</span><span class="va">upr.bin</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Results messages from expandCounts():</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   2 rows had an individual measurement.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       name lwr.bin upr.bin newlen         lennote</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Frank    17.1    17.1   17.1 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Max    17.3    17.3   17.3 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Johnson    15.5    15.5   15.5 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Johnson    15.5    15.5   15.5 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Johnson    15.5    15.5   15.5 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Johnson    15.5    15.5   15.5 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   Jones    16.0    16.5   16.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   Jones    16.0    16.5   16.5 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   Frank    16.0    16.5   16.5 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   Frank    16.0    16.5   16.3 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   Frank    16.0    16.5   16.0 Expanded length</span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co"># some need expansion but include NAs for upper values</span></span></span>
<span class="r-in"><span><span class="op">(</span> <span class="va">d2c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>name<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Johnson"</span>,<span class="st">"Johnson"</span>,<span class="st">"Jones"</span>,<span class="st">"Frank"</span>,<span class="st">"Frank"</span>,<span class="st">"Max"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    lwr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="cn">NA</span>,  <span class="fl">16</span>  ,<span class="fl">16</span>  ,<span class="fl">17.1</span>,<span class="fl">17.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    upr.bin<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">15.5</span>,<span class="fl">16.5</span>,<span class="fl">16.5</span>,<span class="fl">17.1</span>,<span class="fl">17.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    freq<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      name lwr.bin upr.bin freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Johnson      NA    15.0    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Johnson      NA    15.5    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Jones    16.0    16.5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Frank    16.0    16.5    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Frank    17.1    17.1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     Max    17.3    17.3    1</span>
<span class="r-in"><span><span class="fu">expandCounts</span><span class="op">(</span><span class="va">d2c</span>,<span class="op">~</span><span class="va">freq</span>,<span class="op">~</span><span class="va">lwr.bin</span><span class="op">+</span><span class="va">upr.bin</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Results messages from expandCounts():</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   2 rows had an individual measurement.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       name lwr.bin upr.bin newlen         lennote</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Frank    17.1    17.1   17.1 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Max    17.3    17.3   17.3 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Johnson    15.0    15.0   15.0 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Johnson    15.5    15.5   15.5 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Johnson    15.5    15.5   15.5 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Johnson    15.5    15.5   15.5 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Johnson    15.5    15.5   15.5 Observed length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   Jones    16.0    16.5   16.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   Jones    16.0    16.5   16.2 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   Frank    16.0    16.5   16.0 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   Frank    16.0    16.5   16.0 Expanded length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   Frank    16.0    16.5   16.0 Expanded length</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">##!!##!!## Change path to where example file is and then run to demo</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Read in datafile (note periods in names)</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"c:/aaawork/consulting/R_WiDNR/Statewide/Surveysummaries2010.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="co">## narrow variables for simplicity</span></span></span>
<span class="r-in"><span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"County"</span>,<span class="st">"Waterbody.Name"</span>,<span class="st">"Survey.Year"</span>,<span class="st">"Gear"</span>,<span class="st">"Species"</span>,</span></span>
<span class="r-in"><span>             <span class="st">"Number.of.Fish"</span>,<span class="st">"Length.or.Lower.Length.IN"</span>,<span class="st">"Length.Upper.IN"</span>,</span></span>
<span class="r-in"><span>             <span class="st">"Weight.Pounds"</span>,<span class="st">"Gender"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="co">## Sum the count to see how many fish there should be after expansion</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">df1</span><span class="op">$</span><span class="va">Number.of.Fish</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Simple expansion</span></span></span>
<span class="r-in"><span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu">expandCounts</span><span class="op">(</span><span class="va">df1</span>,<span class="op">~</span><span class="va">Number.of.Fish</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Same expansion but include random component to lengths (thus new variable)</span></span></span>
<span class="r-in"><span><span class="co">##   also note default lprec=0.1</span></span></span>
<span class="r-in"><span><span class="va">df3</span> <span class="op">&lt;-</span> <span class="fu">expandCounts</span><span class="op">(</span><span class="va">df1</span>,<span class="op">~</span><span class="va">Number.of.Fish</span>,<span class="op">~</span><span class="va">Length.or.Lower.Length.IN</span><span class="op">+</span><span class="va">Length.Upper.IN</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="http://derekogle.com" class="external-link">Derek H. Ogle</a>, Jason C. Doll, A. Powell Wheeler, Alexis Dinno.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

