<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Repeat individual fish data (including lengths) from tallied counts. — expandCounts • FSA</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />
<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Repeat individual fish data (including lengths) from tallied counts. — expandCounts" />

<meta property="og:description" content="Repeat individual fish data, including lengths, from tallied counts and, optionally, add a random digit to length measurements to simulate actual length of fish in the bin.  This is useful as a precursor to summaries that require information, e.g., lengths, of individual fish (e.g., length frequency histograms, means lengths)." />

<meta property="og:image" content="http://derekogle.com/FSA/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FSA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.23</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-2x"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/droglenc/FSA">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Repeat individual fish data (including lengths) from tallied counts.</h1>
    <small class="dont-index">Source: <a href='https://github.com/droglenc/FSA/blob/master/R/expandCounts.R'><code>R/expandCounts.R</code></a></small>
    <div class="hidden name"><code>expandCounts.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Repeat individual fish data, including lengths, from tallied counts and, optionally, add a random digit to length measurements to simulate actual length of fish in the bin.  This is useful as a precursor to summaries that require information, e.g., lengths, of individual fish (e.g., length frequency histograms, means lengths).</p>
    
    </div>

    <pre class="usage"><span class='fu'>expandCounts</span>(<span class='no'>data</span>, <span class='no'>cform</span>, <span class='kw'>lform</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>removeCount</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>lprec</span> <span class='kw'>=</span> <span class='fl'>0.1</span>, <span class='kw'>new.name</span> <span class='kw'>=</span> <span class='st'>"newlen"</span>, <span class='kw'>cwid</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data.frame that contains variables in <code>cform</code> and <code>lform</code>.</p></td>
    </tr>
    <tr>
      <th>cform</th>
      <td><p>A formula of the form <code>~countvar</code> where <code>countvar</code> generically represents the variable in <code>data</code> that contains the counts of individuals.  See details.</p></td>
    </tr>
    <tr>
      <th>lform</th>
      <td><p>An optional formula of the form <code>~lowerbin+upperbin</code> where <code>lowerbin</code> and <code>upperbin</code> generically represent the variables in <code>data</code> that identify the lower- and upper-values of the length bins.  See details.</p></td>
    </tr>
    <tr>
      <th>removeCount</th>
      <td><p>A single logical that indicates if the variable that contains the counts of individuals (as given in <code>cform</code>) should be removed form the returned data.frame.  The default is <code>TRUE</code> such that the variable will be removed as the returned data.frame contains individuals and the counts of individuals in tallied bins is not relevant to an individual.</p></td>
    </tr>
    <tr>
      <th>lprec</th>
      <td><p>A single numeric that controls the precision to which the random lengths are recorded.  See details.</p></td>
    </tr>
    <tr>
      <th>new.name</th>
      <td><p>A single string that contains a name for the new length variable if random lengths are to be created.</p></td>
    </tr>
    <tr>
      <th>cwid</th>
      <td><p>A single positive numeric that will be added to the lower length bin value in instances where the count exceeds one but only a lower (and not an upper) length were recorded.  See details.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>A logical indicating whether progress message should be printed or not.</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>Not yet implemented.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data.frame of the same structure as <code>data</code> except that the variable in <code>cform</code> may be deleted and the variable in <code>new.name</code> may be added.  The returned data.frame will have more rows than <code>data</code> because of the potential addition of new individuals expanded from the counts in <code>cform</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Fisheries data may be recorded as tallied counts in the field.  For example, field biologists may have simply recorded that there were 10 fish in one group, 15 in another, etc.  More specifically, the biologist may have recorded that there were 10 male Bluegill from the first sampling event between 100 and 124 mm, 15 male Bluegill from the first sampling event between 125 and 149 mm, and so on.  At times, it may be necessary to expand these counts such that the repeated information appears in individual rows in a new data.frame.  In this specific example, the tallied counts would be repeated such that the male, Bluegill, first sampling event, 100-124 mm information would be repeated 10 times; the male, Bluegill, first sampling event, 125-149 mm information would be repeated 15 times, and so on.  This function facilitates this type of expansion.</p>
<p>Length data has often been collected in a &#8220;binned-and-tallied&#8221; format (e.g., 10 fish in the 100-124 mm group, 15 in the 125-149 mm group, etc.).  This type of data collection does not facilitate easy or precise calculations of summary statistics of length (i.e., mean and standard deviations of length).  Expanding the data as described above does not solve this problem because the length data are still essentially categorical (i.e., which group the fish belongs to rather than what it's actual length is).  To facilitate computation of summary statistics, the data can be expanded as described above and then a length can be randomly selected from within the recorded length bin to serve as a &#8220;measured&#8221; length for that fish.  This function performs this type of expansion by randomly selecting the length from a uniform distribution within the length bin (e.g., each value between 100 and 124 mm has the same probability of being selected).</p>
<p>This function makes some assumptions for some coding situations.  First, it assumes that all <code>lowerbin</code> values are actually lower than all <code>upperbin</code> values.  The function will throw an error if this is not true.  Second, it assumes that if a <code>lowerbin</code> but no <code>upperbin</code> value is given then the <code>lowerbin</code> value is the exact measurement for those fish.  Third, it assumes that if an <code>upperbin</code> but no <code>lowerbin</code> value is given that this is a data entry error and that the <code>upperbin</code> value should be the <code>lowerbin</code> value.  Fourth, it assumes that it is a data entry error if <code>varcount</code> is zero or <code>NA</code> and <code>lowerbin</code> or <code>upperbin</code> contains values (i.e., why would there be lengths if no fish were captured?).</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>See <code><a href='expandLenFreq.html'>expandLenFreq</a></code> for expanding length frequencies where individual fish measurements were made on individual fish in a subsample and the remaining fish were simply counted.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># all need expansion</span>
( <span class='no'>d1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>name</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"Johnson"</span>,<span class='st'>"Johnson"</span>,<span class='st'>"Jones"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Max"</span>),
                   <span class='kw'>lwr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15</span>,<span class='fl'>15.5</span>,<span class='fl'>16</span>,<span class='fl'>16</span>,<span class='fl'>17</span>,<span class='fl'>17</span>),
                   <span class='kw'>upr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15.5</span>,<span class='fl'>16</span>,<span class='fl'>16.5</span>,<span class='fl'>16.5</span>,<span class='fl'>17.5</span>,<span class='fl'>17.5</span>),
                   <span class='kw'>freq</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>6</span>,<span class='fl'>4</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>1</span>,<span class='fl'>1</span>)) )</div><div class='output co'>#&gt;      name lwr.bin upr.bin freq
#&gt; 1 Johnson    15.0    15.5    6
#&gt; 2 Johnson    15.5    16.0    4
#&gt; 3   Jones    16.0    16.5    2
#&gt; 4   Frank    16.0    16.5    3
#&gt; 5   Frank    17.0    17.5    1
#&gt; 6     Max    17.0    17.5    1</div><div class='input'><span class='fu'>expandCounts</span>(<span class='no'>d1</span>,~<span class='no'>freq</span>)</div><div class='output co'>#&gt; <span class='message'>Results messages from expandCounts():</span>
#&gt; <span class='message'>  2 rows had an individual measurement.</span>
#&gt; <span class='message'>  4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span></div><div class='output co'>#&gt;       name lwr.bin upr.bin
#&gt; 1    Frank    17.0    17.5
#&gt; 2      Max    17.0    17.5
#&gt; 3  Johnson    15.0    15.5
#&gt; 4  Johnson    15.0    15.5
#&gt; 5  Johnson    15.0    15.5
#&gt; 6  Johnson    15.0    15.5
#&gt; 7  Johnson    15.0    15.5
#&gt; 8  Johnson    15.0    15.5
#&gt; 9  Johnson    15.5    16.0
#&gt; 10 Johnson    15.5    16.0
#&gt; 11 Johnson    15.5    16.0
#&gt; 12 Johnson    15.5    16.0
#&gt; 13   Jones    16.0    16.5
#&gt; 14   Jones    16.0    16.5
#&gt; 15   Frank    16.0    16.5
#&gt; 16   Frank    16.0    16.5
#&gt; 17   Frank    16.0    16.5</div><div class='input'><span class='fu'>expandCounts</span>(<span class='no'>d1</span>,~<span class='no'>freq</span>,~<span class='no'>lwr.bin</span>+<span class='no'>upr.bin</span>)</div><div class='output co'>#&gt; <span class='message'>Results messages from expandCounts():</span>
#&gt; <span class='message'>  2 rows had an individual measurement.</span>
#&gt; <span class='message'>  4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span></div><div class='output co'>#&gt;       name lwr.bin upr.bin newlen         lennote
#&gt; 1    Frank    17.0    17.5   17.5 Expanded length
#&gt; 2      Max    17.0    17.5   17.0 Expanded length
#&gt; 3  Johnson    15.0    15.5   15.0 Expanded length
#&gt; 4  Johnson    15.0    15.5   15.2 Expanded length
#&gt; 5  Johnson    15.0    15.5   15.4 Expanded length
#&gt; 6  Johnson    15.0    15.5   15.3 Expanded length
#&gt; 7  Johnson    15.0    15.5   15.3 Expanded length
#&gt; 8  Johnson    15.0    15.5   15.3 Expanded length
#&gt; 9  Johnson    15.5    16.0   15.6 Expanded length
#&gt; 10 Johnson    15.5    16.0   15.9 Expanded length
#&gt; 11 Johnson    15.5    16.0   15.6 Expanded length
#&gt; 12 Johnson    15.5    16.0   15.9 Expanded length
#&gt; 13   Jones    16.0    16.5   16.0 Expanded length
#&gt; 14   Jones    16.0    16.5   16.1 Expanded length
#&gt; 15   Frank    16.0    16.5   16.5 Expanded length
#&gt; 16   Frank    16.0    16.5   16.1 Expanded length
#&gt; 17   Frank    16.0    16.5   16.5 Expanded length</div><div class='input'>
<span class='co'># some need expansion</span>
( <span class='no'>d2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>name</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"Johnson"</span>,<span class='st'>"Johnson"</span>,<span class='st'>"Jones"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Max"</span>),
                   <span class='kw'>lwr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15</span>,<span class='fl'>15.5</span>,<span class='fl'>16</span>,<span class='fl'>16</span>,<span class='fl'>17.1</span>,<span class='fl'>17.3</span>),
                   <span class='kw'>upr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15.5</span>,<span class='fl'>16</span>,<span class='fl'>16.5</span>,<span class='fl'>16.5</span>,<span class='fl'>17.1</span>,<span class='fl'>17.3</span>),
                   <span class='kw'>freq</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>6</span>,<span class='fl'>4</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>1</span>,<span class='fl'>1</span>)) )</div><div class='output co'>#&gt;      name lwr.bin upr.bin freq
#&gt; 1 Johnson    15.0    15.5    6
#&gt; 2 Johnson    15.5    16.0    4
#&gt; 3   Jones    16.0    16.5    2
#&gt; 4   Frank    16.0    16.5    3
#&gt; 5   Frank    17.1    17.1    1
#&gt; 6     Max    17.3    17.3    1</div><div class='input'><span class='fu'>expandCounts</span>(<span class='no'>d2</span>,~<span class='no'>freq</span>)</div><div class='output co'>#&gt; <span class='message'>Results messages from expandCounts():</span>
#&gt; <span class='message'>  2 rows had an individual measurement.</span>
#&gt; <span class='message'>  4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span></div><div class='output co'>#&gt;       name lwr.bin upr.bin
#&gt; 1    Frank    17.1    17.1
#&gt; 2      Max    17.3    17.3
#&gt; 3  Johnson    15.0    15.5
#&gt; 4  Johnson    15.0    15.5
#&gt; 5  Johnson    15.0    15.5
#&gt; 6  Johnson    15.0    15.5
#&gt; 7  Johnson    15.0    15.5
#&gt; 8  Johnson    15.0    15.5
#&gt; 9  Johnson    15.5    16.0
#&gt; 10 Johnson    15.5    16.0
#&gt; 11 Johnson    15.5    16.0
#&gt; 12 Johnson    15.5    16.0
#&gt; 13   Jones    16.0    16.5
#&gt; 14   Jones    16.0    16.5
#&gt; 15   Frank    16.0    16.5
#&gt; 16   Frank    16.0    16.5
#&gt; 17   Frank    16.0    16.5</div><div class='input'><span class='fu'>expandCounts</span>(<span class='no'>d2</span>,~<span class='no'>freq</span>,~<span class='no'>lwr.bin</span>+<span class='no'>upr.bin</span>)</div><div class='output co'>#&gt; <span class='message'>Results messages from expandCounts():</span>
#&gt; <span class='message'>  2 rows had an individual measurement.</span>
#&gt; <span class='message'>  4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span></div><div class='output co'>#&gt;       name lwr.bin upr.bin newlen         lennote
#&gt; 1    Frank    17.1    17.1   17.1 Observed length
#&gt; 2      Max    17.3    17.3   17.3 Observed length
#&gt; 3  Johnson    15.0    15.5   15.3 Expanded length
#&gt; 4  Johnson    15.0    15.5   15.4 Expanded length
#&gt; 5  Johnson    15.0    15.5   15.2 Expanded length
#&gt; 6  Johnson    15.0    15.5   15.2 Expanded length
#&gt; 7  Johnson    15.0    15.5   15.1 Expanded length
#&gt; 8  Johnson    15.0    15.5   15.3 Expanded length
#&gt; 9  Johnson    15.5    16.0   15.8 Expanded length
#&gt; 10 Johnson    15.5    16.0   15.6 Expanded length
#&gt; 11 Johnson    15.5    16.0   15.6 Expanded length
#&gt; 12 Johnson    15.5    16.0   15.6 Expanded length
#&gt; 13   Jones    16.0    16.5   16.3 Expanded length
#&gt; 14   Jones    16.0    16.5   16.0 Expanded length
#&gt; 15   Frank    16.0    16.5   16.4 Expanded length
#&gt; 16   Frank    16.0    16.5   16.5 Expanded length
#&gt; 17   Frank    16.0    16.5   16.3 Expanded length</div><div class='input'>
<span class='co'># none need expansion</span>
( <span class='no'>d3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>name</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"Johnson"</span>,<span class='st'>"Johnson"</span>,<span class='st'>"Jones"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Max"</span>),
                   <span class='kw'>lwr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15</span>,<span class='fl'>15.5</span>,<span class='fl'>16</span>,<span class='fl'>16</span>,<span class='fl'>17.1</span>,<span class='fl'>17.3</span>),
                   <span class='kw'>upr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15</span>,<span class='fl'>15.5</span>,<span class='fl'>16</span>,<span class='fl'>16</span>,<span class='fl'>17.1</span>,<span class='fl'>17.3</span>),
                   <span class='kw'>freq</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>6</span>,<span class='fl'>4</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>1</span>,<span class='fl'>1</span>)) )</div><div class='output co'>#&gt;      name lwr.bin upr.bin freq
#&gt; 1 Johnson    15.0    15.0    6
#&gt; 2 Johnson    15.5    15.5    4
#&gt; 3   Jones    16.0    16.0    2
#&gt; 4   Frank    16.0    16.0    3
#&gt; 5   Frank    17.1    17.1    1
#&gt; 6     Max    17.3    17.3    1</div><div class='input'><span class='fu'>expandCounts</span>(<span class='no'>d3</span>,~<span class='no'>freq</span>)</div><div class='output co'>#&gt; <span class='message'>Results messages from expandCounts():</span>
#&gt; <span class='message'>  2 rows had an individual measurement.</span>
#&gt; <span class='message'>  4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span></div><div class='output co'>#&gt;       name lwr.bin upr.bin
#&gt; 1    Frank    17.1    17.1
#&gt; 2      Max    17.3    17.3
#&gt; 3  Johnson    15.0    15.0
#&gt; 4  Johnson    15.0    15.0
#&gt; 5  Johnson    15.0    15.0
#&gt; 6  Johnson    15.0    15.0
#&gt; 7  Johnson    15.0    15.0
#&gt; 8  Johnson    15.0    15.0
#&gt; 9  Johnson    15.5    15.5
#&gt; 10 Johnson    15.5    15.5
#&gt; 11 Johnson    15.5    15.5
#&gt; 12 Johnson    15.5    15.5
#&gt; 13   Jones    16.0    16.0
#&gt; 14   Jones    16.0    16.0
#&gt; 15   Frank    16.0    16.0
#&gt; 16   Frank    16.0    16.0
#&gt; 17   Frank    16.0    16.0</div><div class='input'><span class='fu'>expandCounts</span>(<span class='no'>d3</span>,~<span class='no'>freq</span>,~<span class='no'>lwr.bin</span>+<span class='no'>upr.bin</span>)</div><div class='output co'>#&gt; <span class='message'>Results messages from expandCounts():</span>
#&gt; <span class='message'>  2 rows had an individual measurement.</span>
#&gt; <span class='message'>  4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span></div><div class='output co'>#&gt;       name lwr.bin upr.bin newlen         lennote
#&gt; 1    Frank    17.1    17.1   17.1 Observed length
#&gt; 2      Max    17.3    17.3   17.3 Observed length
#&gt; 3  Johnson    15.0    15.0   15.0 Observed length
#&gt; 4  Johnson    15.0    15.0   15.0 Observed length
#&gt; 5  Johnson    15.0    15.0   15.0 Observed length
#&gt; 6  Johnson    15.0    15.0   15.0 Observed length
#&gt; 7  Johnson    15.0    15.0   15.0 Observed length
#&gt; 8  Johnson    15.0    15.0   15.0 Observed length
#&gt; 9  Johnson    15.5    15.5   15.5 Observed length
#&gt; 10 Johnson    15.5    15.5   15.5 Observed length
#&gt; 11 Johnson    15.5    15.5   15.5 Observed length
#&gt; 12 Johnson    15.5    15.5   15.5 Observed length
#&gt; 13   Jones    16.0    16.0   16.0 Observed length
#&gt; 14   Jones    16.0    16.0   16.0 Observed length
#&gt; 15   Frank    16.0    16.0   16.0 Observed length
#&gt; 16   Frank    16.0    16.0   16.0 Observed length
#&gt; 17   Frank    16.0    16.0   16.0 Observed length</div><div class='input'>
<span class='co'># some need expansion, but different bin widths</span>
( <span class='no'>d4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>name</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"Johnson"</span>,<span class='st'>"Johnson"</span>,<span class='st'>"Jones"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Max"</span>),
                   <span class='kw'>lwr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15</span>,  <span class='fl'>15</span>,  <span class='fl'>16</span>,  <span class='fl'>16</span>,  <span class='fl'>17.1</span>,<span class='fl'>17.3</span>),
                   <span class='kw'>upr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15.5</span>,<span class='fl'>15.9</span>,<span class='fl'>16.5</span>,<span class='fl'>16.9</span>,<span class='fl'>17.1</span>,<span class='fl'>17.3</span>),
                   <span class='kw'>freq</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>6</span>,<span class='fl'>4</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>1</span>,<span class='fl'>1</span>)) )</div><div class='output co'>#&gt;      name lwr.bin upr.bin freq
#&gt; 1 Johnson    15.0    15.5    6
#&gt; 2 Johnson    15.0    15.9    4
#&gt; 3   Jones    16.0    16.5    2
#&gt; 4   Frank    16.0    16.9    3
#&gt; 5   Frank    17.1    17.1    1
#&gt; 6     Max    17.3    17.3    1</div><div class='input'><span class='fu'>expandCounts</span>(<span class='no'>d4</span>,~<span class='no'>freq</span>)</div><div class='output co'>#&gt; <span class='message'>Results messages from expandCounts():</span>
#&gt; <span class='message'>  2 rows had an individual measurement.</span>
#&gt; <span class='message'>  4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span></div><div class='output co'>#&gt;       name lwr.bin upr.bin
#&gt; 1    Frank    17.1    17.1
#&gt; 2      Max    17.3    17.3
#&gt; 3  Johnson    15.0    15.5
#&gt; 4  Johnson    15.0    15.5
#&gt; 5  Johnson    15.0    15.5
#&gt; 6  Johnson    15.0    15.5
#&gt; 7  Johnson    15.0    15.5
#&gt; 8  Johnson    15.0    15.5
#&gt; 9  Johnson    15.0    15.9
#&gt; 10 Johnson    15.0    15.9
#&gt; 11 Johnson    15.0    15.9
#&gt; 12 Johnson    15.0    15.9
#&gt; 13   Jones    16.0    16.5
#&gt; 14   Jones    16.0    16.5
#&gt; 15   Frank    16.0    16.9
#&gt; 16   Frank    16.0    16.9
#&gt; 17   Frank    16.0    16.9</div><div class='input'><span class='fu'>expandCounts</span>(<span class='no'>d4</span>,~<span class='no'>freq</span>,~<span class='no'>lwr.bin</span>+<span class='no'>upr.bin</span>)</div><div class='output co'>#&gt; <span class='message'>Results messages from expandCounts():</span>
#&gt; <span class='message'>  2 rows had an individual measurement.</span>
#&gt; <span class='message'>  4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span></div><div class='output co'>#&gt;       name lwr.bin upr.bin newlen         lennote
#&gt; 1    Frank    17.1    17.1   17.1 Observed length
#&gt; 2      Max    17.3    17.3   17.3 Observed length
#&gt; 3  Johnson    15.0    15.5   15.1 Expanded length
#&gt; 4  Johnson    15.0    15.5   15.2 Expanded length
#&gt; 5  Johnson    15.0    15.5   15.3 Expanded length
#&gt; 6  Johnson    15.0    15.5   15.5 Expanded length
#&gt; 7  Johnson    15.0    15.5   15.5 Expanded length
#&gt; 8  Johnson    15.0    15.5   15.3 Expanded length
#&gt; 9  Johnson    15.0    15.9   15.6 Expanded length
#&gt; 10 Johnson    15.0    15.9   15.8 Expanded length
#&gt; 11 Johnson    15.0    15.9   15.7 Expanded length
#&gt; 12 Johnson    15.0    15.9   15.6 Expanded length
#&gt; 13   Jones    16.0    16.5   16.5 Expanded length
#&gt; 14   Jones    16.0    16.5   16.0 Expanded length
#&gt; 15   Frank    16.0    16.9   16.8 Expanded length
#&gt; 16   Frank    16.0    16.9   16.2 Expanded length
#&gt; 17   Frank    16.0    16.9   16.6 Expanded length</div><div class='input'>
<span class='co'># some need expansion but include zeros and NAs for counts</span>
( <span class='no'>d2a</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>name</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"Johnson"</span>,<span class='st'>"Johnson"</span>,<span class='st'>"Jones"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Max"</span>,<span class='st'>"Max"</span>,<span class='st'>"Max"</span>,<span class='st'>"Max"</span>),
                    <span class='kw'>lwr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15</span>,  <span class='fl'>15.5</span>,<span class='fl'>16</span>  ,<span class='fl'>16</span>  ,<span class='fl'>17.1</span>,<span class='fl'>17.3</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>),
                    <span class='kw'>upr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15.5</span>,<span class='fl'>16</span>  ,<span class='fl'>16.5</span>,<span class='fl'>16.5</span>,<span class='fl'>17.1</span>,<span class='fl'>17.3</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>),
                    <span class='kw'>freq</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>6</span>,<span class='fl'>4</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>NA</span>,<span class='fl'>0</span>,<span class='fl'>NA</span>)) )</div><div class='output co'>#&gt;      name lwr.bin upr.bin freq
#&gt; 1 Johnson    15.0    15.5    6
#&gt; 2 Johnson    15.5    16.0    4
#&gt; 3   Jones    16.0    16.5    2
#&gt; 4   Frank    16.0    16.5    3
#&gt; 5   Frank    17.1    17.1    1
#&gt; 6     Max    17.3    17.3    1
#&gt; 7     Max      NA      NA   NA
#&gt; 8     Max      NA      NA    0
#&gt; 9     Max      NA      NA   NA</div><div class='input'><span class='fu'>expandCounts</span>(<span class='no'>d2a</span>,~<span class='no'>freq</span>,~<span class='no'>lwr.bin</span>+<span class='no'>upr.bin</span>)</div><div class='output co'>#&gt; <span class='message'>Results messages from expandCounts():</span>
#&gt; <span class='message'>  Rows 7, 8, 9 had zero or no counts in freq.</span>
#&gt; <span class='message'>  2 rows had an individual measurement.</span>
#&gt; <span class='message'>  4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span></div><div class='output co'>#&gt;       name lwr.bin upr.bin newlen         lennote
#&gt; 1      Max      NA      NA     NA Observed length
#&gt; 2      Max      NA      NA     NA Observed length
#&gt; 3      Max      NA      NA     NA Observed length
#&gt; 4    Frank    17.1    17.1   17.1 Observed length
#&gt; 5      Max    17.3    17.3   17.3 Observed length
#&gt; 6  Johnson    15.0    15.5   15.1 Expanded length
#&gt; 7  Johnson    15.0    15.5   15.3 Expanded length
#&gt; 8  Johnson    15.0    15.5   15.2 Expanded length
#&gt; 9  Johnson    15.0    15.5   15.1 Expanded length
#&gt; 10 Johnson    15.0    15.5   15.3 Expanded length
#&gt; 11 Johnson    15.0    15.5   15.5 Expanded length
#&gt; 12 Johnson    15.5    16.0   15.7 Expanded length
#&gt; 13 Johnson    15.5    16.0   15.8 Expanded length
#&gt; 14 Johnson    15.5    16.0   15.8 Expanded length
#&gt; 15 Johnson    15.5    16.0   15.9 Expanded length
#&gt; 16   Jones    16.0    16.5   16.2 Expanded length
#&gt; 17   Jones    16.0    16.5   16.5 Expanded length
#&gt; 18   Frank    16.0    16.5   16.3 Expanded length
#&gt; 19   Frank    16.0    16.5   16.0 Expanded length
#&gt; 20   Frank    16.0    16.5   16.1 Expanded length</div><div class='input'>
<span class='co'># some need expansion but include NAs for upper values</span>
( <span class='no'>d2b</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>name</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"Johnson"</span>,<span class='st'>"Johnson"</span>,<span class='st'>"Jones"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Max"</span>),
                    <span class='kw'>lwr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15</span>,  <span class='fl'>15.5</span>,<span class='fl'>16</span>  ,<span class='fl'>16</span>  ,<span class='fl'>17.1</span>,<span class='fl'>17.3</span>),
                    <span class='kw'>upr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>NA</span>  ,<span class='fl'>NA</span>  ,<span class='fl'>16.5</span>,<span class='fl'>16.5</span>,<span class='fl'>17.1</span>,<span class='fl'>17.3</span>),
                    <span class='kw'>freq</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>6</span>,<span class='fl'>4</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>1</span>,<span class='fl'>1</span>)) )</div><div class='output co'>#&gt;      name lwr.bin upr.bin freq
#&gt; 1 Johnson    15.0      NA    6
#&gt; 2 Johnson    15.5      NA    4
#&gt; 3   Jones    16.0    16.5    2
#&gt; 4   Frank    16.0    16.5    3
#&gt; 5   Frank    17.1    17.1    1
#&gt; 6     Max    17.3    17.3    1</div><div class='input'><span class='fu'>expandCounts</span>(<span class='no'>d2b</span>,~<span class='no'>freq</span>,~<span class='no'>lwr.bin</span>+<span class='no'>upr.bin</span>)</div><div class='output co'>#&gt; <span class='message'>Results messages from expandCounts():</span>
#&gt; <span class='message'>  2 rows had an individual measurement.</span>
#&gt; <span class='message'>  4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span></div><div class='output co'>#&gt;       name lwr.bin upr.bin newlen         lennote
#&gt; 1    Frank    17.1    17.1   17.1 Observed length
#&gt; 2      Max    17.3    17.3   17.3 Observed length
#&gt; 3  Johnson    15.0    15.0   15.0 Observed length
#&gt; 4  Johnson    15.0    15.0   15.0 Observed length
#&gt; 5  Johnson    15.0    15.0   15.0 Observed length
#&gt; 6  Johnson    15.0    15.0   15.0 Observed length
#&gt; 7  Johnson    15.0    15.0   15.0 Observed length
#&gt; 8  Johnson    15.0    15.0   15.0 Observed length
#&gt; 9  Johnson    15.5    15.5   15.5 Observed length
#&gt; 10 Johnson    15.5    15.5   15.5 Observed length
#&gt; 11 Johnson    15.5    15.5   15.5 Observed length
#&gt; 12 Johnson    15.5    15.5   15.5 Observed length
#&gt; 13   Jones    16.0    16.5   16.5 Expanded length
#&gt; 14   Jones    16.0    16.5   16.4 Expanded length
#&gt; 15   Frank    16.0    16.5   16.3 Expanded length
#&gt; 16   Frank    16.0    16.5   16.4 Expanded length
#&gt; 17   Frank    16.0    16.5   16.2 Expanded length</div><div class='input'>
<span class='co'># some need expansion but include NAs for upper values</span>
( <span class='no'>d2c</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>name</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"Johnson"</span>,<span class='st'>"Johnson"</span>,<span class='st'>"Jones"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Frank"</span>,<span class='st'>"Max"</span>),
                    <span class='kw'>lwr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>NA</span>,<span class='fl'>NA</span>,  <span class='fl'>16</span>  ,<span class='fl'>16</span>  ,<span class='fl'>17.1</span>,<span class='fl'>17.3</span>),
                    <span class='kw'>upr.bin</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15</span>,<span class='fl'>15.5</span>,<span class='fl'>16.5</span>,<span class='fl'>16.5</span>,<span class='fl'>17.1</span>,<span class='fl'>17.3</span>),
                    <span class='kw'>freq</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>6</span>,<span class='fl'>4</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>1</span>,<span class='fl'>1</span>)) )</div><div class='output co'>#&gt;      name lwr.bin upr.bin freq
#&gt; 1 Johnson      NA    15.0    6
#&gt; 2 Johnson      NA    15.5    4
#&gt; 3   Jones    16.0    16.5    2
#&gt; 4   Frank    16.0    16.5    3
#&gt; 5   Frank    17.1    17.1    1
#&gt; 6     Max    17.3    17.3    1</div><div class='input'><span class='fu'>expandCounts</span>(<span class='no'>d2c</span>,~<span class='no'>freq</span>,~<span class='no'>lwr.bin</span>+<span class='no'>upr.bin</span>)</div><div class='output co'>#&gt; <span class='message'>Results messages from expandCounts():</span>
#&gt; <span class='message'>  2 rows had an individual measurement.</span>
#&gt; <span class='message'>  4 rows with multiple measurements were expanded to 15 rows of individual measurements.</span></div><div class='output co'>#&gt;       name lwr.bin upr.bin newlen         lennote
#&gt; 1    Frank    17.1    17.1   17.1 Observed length
#&gt; 2      Max    17.3    17.3   17.3 Observed length
#&gt; 3  Johnson    15.0    15.0   15.0 Observed length
#&gt; 4  Johnson    15.0    15.0   15.0 Observed length
#&gt; 5  Johnson    15.0    15.0   15.0 Observed length
#&gt; 6  Johnson    15.0    15.0   15.0 Observed length
#&gt; 7  Johnson    15.0    15.0   15.0 Observed length
#&gt; 8  Johnson    15.0    15.0   15.0 Observed length
#&gt; 9  Johnson    15.5    15.5   15.5 Observed length
#&gt; 10 Johnson    15.5    15.5   15.5 Observed length
#&gt; 11 Johnson    15.5    15.5   15.5 Observed length
#&gt; 12 Johnson    15.5    15.5   15.5 Observed length
#&gt; 13   Jones    16.0    16.5   16.3 Expanded length
#&gt; 14   Jones    16.0    16.5   16.0 Expanded length
#&gt; 15   Frank    16.0    16.5   16.2 Expanded length
#&gt; 16   Frank    16.0    16.5   16.3 Expanded length
#&gt; 17   Frank    16.0    16.5   16.4 Expanded length</div><div class='input'>
</div><span class='co'># NOT RUN {</span>
<span class='co'>##!!##!!## Change path to where example file is and then run to demo</span>

<span class='co'>## Read in datafile (note periods in names)</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/read.table'>read.csv</a></span>(<span class='st'>"c:/aaawork/consulting/R_WiDNR/Statewide/Surveysummaries2010.csv"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>df</span>)
<span class='co'>## narrow variables for simplicity</span>
<span class='no'>df1</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[,<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"County"</span>,<span class='st'>"Waterbody.Name"</span>,<span class='st'>"Survey.Year"</span>,<span class='st'>"Gear"</span>,<span class='st'>"Species"</span>,
             <span class='st'>"Number.of.Fish"</span>,<span class='st'>"Length.or.Lower.Length.IN"</span>,<span class='st'>"Length.Upper.IN"</span>,
             <span class='st'>"Weight.Pounds"</span>,<span class='st'>"Gender"</span>)]
<span class='co'>## Sum the count to see how many fish there should be after expansion</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sum'>sum</a></span>(<span class='no'>df1</span>$<span class='no'>Number.of.Fish</span>)

<span class='co'>## Simple expansion</span>
<span class='no'>df2</span> <span class='kw'>&lt;-</span> <span class='fu'>expandCounts</span>(<span class='no'>df1</span>,~<span class='no'>Number.of.Fish</span>)

<span class='co'>## Same expansion but include random component to lengths (thus new variable)</span>
<span class='co'>##   also note default lprec=0.1</span>
<span class='no'>df3</span> <span class='kw'>&lt;-</span> <span class='fu'>expandCounts</span>(<span class='no'>df1</span>,~<span class='no'>Number.of.Fish</span>,~<span class='no'>Length.or.Lower.Length.IN</span>+<span class='no'>Length.Upper.IN</span>)

<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Derek H. Ogle, <a href='mailto:derek@derekogle.com'>derek@derekogle.com</a></p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Derek Ogle, Powell Wheeler, Alexis Dinno.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

