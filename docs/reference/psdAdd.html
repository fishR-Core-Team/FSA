<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Creates a vector of Gabelhouse lengths for each species in an entire data frame. — psdAdd • FSA</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creates a vector of Gabelhouse lengths for each species in an entire data frame. — psdAdd"><meta name="description" content="Creates a vector of the Gabelhouse lengths specific to a species for all individuals in an entire data frame."><meta property="og:description" content="Creates a vector of the Gabelhouse lengths specific to a species for all individuals in an entire data frame."><meta property="og:image" content="https://fishr-core-team.github.io/FSA/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FSA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.9.6.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-demonstrations" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Demonstrations</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-demonstrations"><li><a class="dropdown-item" href="../articles/Computing_PSDs.html">Computing Proportional Size Distribution Metrics</a></li>
    <li><a class="dropdown-item" href="../articles/Computing_Relative_Weights.html">Computing Relative Weights</a></li>
    <li><a class="dropdown-item" href="../articles/Fitting_Growth_Functions.html">Fitting Growth Functions</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-explanations" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Explanations</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-explanations"><li><a class="dropdown-item" href="../articles/Growth_Function_Parameterizations.html">Growth Function Equations</a></li>
    <li><a class="dropdown-item" href="../articles/Growth_Starting_Values.html">Explaining Starting Values for Growth Functions</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../news/index.html" aria-label="See package news"><span class="fa fa-newspaper"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Goto FSA home"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fishR-Core-Team/FSA" aria-label="Goto FSA github page"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Creates a vector of Gabelhouse lengths for each species in an entire data frame.</h1>
      <small class="dont-index">Source: <a href="https://github.com/fishR-Core-Team/FSA/blob/HEAD/R/psdAdd.R" class="external-link"><code>R/psdAdd.R</code></a></small>
      <div class="d-none name"><code>psdAdd.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a vector of the Gabelhouse lengths specific to a species for all individuals in an entire data frame.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">psdAdd</span><span class="op">(</span><span class="va">len</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">psdAdd</span><span class="op">(</span></span>
<span>  <span class="va">len</span>,</span>
<span>  <span class="va">species</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  units <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mm"</span>, <span class="st">"cm"</span>, <span class="st">"in"</span><span class="op">)</span>,</span>
<span>  use.names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  as.fact <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">addLens</span><span class="op">)</span>, <span class="va">use.names</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  addLens <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'formula'</span></span>
<span><span class="fu">psdAdd</span><span class="op">(</span></span>
<span>  <span class="va">len</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  units <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mm"</span>, <span class="st">"cm"</span>, <span class="st">"in"</span><span class="op">)</span>,</span>
<span>  use.names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  as.fact <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">addLens</span><span class="op">)</span>, <span class="va">use.names</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  addLens <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-len">len<a class="anchor" aria-label="anchor" href="#arg-len"></a></dt>
<dd><p>A numeric vector that contains lengths measurements or a formula of the form <code>len~spec</code> where “len” generically represents the length variable and “spec” generically represents the species variable. Note that this formula can only contain two variables and must have the length variable on the left-hand-side and the species variable on the right-hand-side.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Not used.</p></dd>


<dt id="arg-species">species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>A character or factor vector that contains the species names. Ignored if <code>len</code> is a formula.</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>A named list that provides specific choices for <code>group</code> for species for which more than one set of Gabelhouse lengths exists in <code><a href="PSDlit.html">PSDlit</a></code>.</p></dd>


<dt id="arg-units">units<a class="anchor" aria-label="anchor" href="#arg-units"></a></dt>
<dd><p>A string that indicates the type of units used for the lengths. Choices are <code>mm</code> for millimeters (DEFAULT), <code>cm</code> for centimeters, and <code>in</code> for inches.</p></dd>


<dt id="arg-use-names">use.names<a class="anchor" aria-label="anchor" href="#arg-use-names"></a></dt>
<dd><p>A logical that indicates whether the vector returned is numeric (<code>=FALSE</code>) or string (<code>=TRUE</code>; default) representations of the Gabelhouse lengths. See details.</p></dd>


<dt id="arg-as-fact">as.fact<a class="anchor" aria-label="anchor" href="#arg-as-fact"></a></dt>
<dd><p>A logical that indicates that the new variable should be returned as a factor (<code>=TRUE</code>) or not (<code>=FALSE</code>). Defaults to same as <code>use.names</code> unless <code>addLens</code> is not <code>NULL</code>, in which case it will default to <code>FALSE</code>. See details.</p></dd>


<dt id="arg-addlens">addLens<a class="anchor" aria-label="anchor" href="#arg-addlens"></a></dt>
<dd><p>A named list with (possibly named) numeric vectors of lengths that should be used in addition to the Gabelhouse lengths for the species that form the names in the list. See examples.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A logical that indicates whether detailed messages about species without Gabelhouse lengths or with no recorded values should be printed or not.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data.frame that minimally contains the length measurements and species names if <code>len</code> is a formula.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A numeric or factor vector that contains the Gabelhouse length categories.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This computes a vector that contains the Gabelhouse lengths specific to each species for all individuals in an entire data frame. The vector can be appended to an existing data.frame to create a variable that contains the Gabelhouse lengths for each individual. The Gabelhouse length value will be <code>NA</code> for each individual for which Gabelhouse length definitions do not exist in <code><a href="PSDlit.html">PSDlit</a></code>. Species names in the data.frame must be the same as those used in <code><a href="PSDlit.html">PSDlit</a></code> (i.e., same spelling and capitalization; use <code><a href="psdVal.html">psdVal()</a></code> to see the list of species).</p>
<p>Some species have Gabelhouse lengths for sub-groups (e.g., “lentic” vs “lotic”). For these species, choose which sub-group to use with <code>group</code>.</p>
<p>Individuals shorter than “stock” length will be listed as <code>substock</code> if <code>use.names=TRUE</code> or <code>0</code> if <code>use.names=FALSE</code>.</p>
<p>Additional lengths to be used for a species may be included by giving a named list with vectors of additional lengths in <code>addLens</code>. Note, however, that <code>as.fact</code> will be reset to <code>FALSE</code> if <code>addLens</code> are specified, as there is no way to order the names (i.e., factor levels) for all species when additional lengths are used.</p>
<p>See examples and <a href="https://fishr-core-team.github.io/FSA/articles/Computing_PSDs.html">this article</a> for a demonstration.</p>
    </div>
    <div class="section level2">
    <h2 id="ifar-chapter">IFAR Chapter<a class="anchor" aria-label="anchor" href="#ifar-chapter"></a></h2>
    <p>6-Size Structure.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Ogle, D.H. 2016. <a href="https://fishr-core-team.github.io/fishR/pages/books.html#introductory-fisheries-analyses-with-r" class="external-link">Introductory Fisheries Analyses with R</a>. Chapman &amp; Hall/CRC, Boca Raton, FL.</p>
<p>Guy, C.S., R.M. Neumann, and D.W. Willis. 2006. New terminology for proportional stock density (PSD) and relative stock density (RSD): proportional size structure (PSS). Fisheries 31:86-87. [Was (is?) from http://pubstorage.sdstate.edu/wfs/415-F.pdf.]</p>
<p>Guy, C.S., R.M. Neumann, D.W. Willis, and R.O. Anderson. 2006. Proportional size distribution (PSD): A further refinement of population size structure index terminology. Fisheries 32:348. [Was (is?) from http://pubstorage.sdstate.edu/wfs/450-F.pdf.]</p>
<p>Willis, D.W., B.R. Murphy, and C.S. Guy. 1993. Stock density indices: development, use, and limitations. Reviews in Fisheries Science 1:203-222. [Was (is?) from http://web1.cnre.vt.edu/murphybr/web/Readings/Willis%20et%20al.pdf.]</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="psdVal.html">psdVal</a></code>, <code><a href="psdCalc.html">psdCalc</a></code>, <code><a href="psdPlot.html">psdPlot</a></code>, <code><a href="PSDlit.html">PSDlit</a></code>, and <code><a href="wrAdd.html">wrAdd</a></code> for related functions. See <code><a href="https://rdrr.io/pkg/plyr/man/mapvalues.html" class="external-link">mapvalues</a></code> for help in changing species names to match those in <code><a href="PSDlit.html">PSDlit</a></code>.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Derek H. Ogle, <a href="mailto:DerekOgle51@gmail.com">DerekOgle51@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#===== Create random data for three species</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">345234534</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dbg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>species<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Bluegill"</span><span class="op">)</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  tl<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">30</span>,<span class="fl">130</span>,<span class="fl">50</span><span class="op">)</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dlb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>species<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Largemouth Bass"</span><span class="op">)</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  tl<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">30</span>,<span class="fl">350</span>,<span class="fl">60</span><span class="op">)</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dbt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>species<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Bluefin Tuna"</span><span class="op">)</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  tl<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">30</span>,<span class="fl">1900</span>,<span class="fl">300</span><span class="op">)</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">dbg</span>,<span class="va">dlb</span>,<span class="va">dbt</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#===== Simple examples</span></span></span>
<span class="r-in"><span><span class="co">#----- Add variable using category names -- non-formula notation</span></span></span>
<span class="r-in"><span><span class="va">df</span><span class="op">$</span><span class="va">PSD</span> <span class="op">&lt;-</span> <span class="fu">psdAdd</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">tl</span>,<span class="va">df</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Species in the data with no Gabelhouse (PSD) lengths in `PSDlit`:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   "Bluefin Tuna".</span>
<span class="r-in"><span><span class="fu"><a href="peek.html">peek</a></span><span class="op">(</span><span class="va">df</span>,n<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            species   tl       PSD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         Bluegill   42  substock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18        Bluegill  120     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 Largemouth Bass  491 preferred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54 Largemouth Bass  293     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 72    Bluefin Tuna 2476      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90    Bluefin Tuna 1551      &lt;NA&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#----- Add variable using category names -- formula notation</span></span></span>
<span class="r-in"><span><span class="va">df</span><span class="op">$</span><span class="va">PSD1</span> <span class="op">&lt;-</span> <span class="fu">psdAdd</span><span class="op">(</span><span class="va">tl</span><span class="op">~</span><span class="va">species</span>,data<span class="op">=</span><span class="va">df</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Species in the data with no Gabelhouse (PSD) lengths in `PSDlit`:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   "Bluefin Tuna".</span>
<span class="r-in"><span><span class="fu"><a href="peek.html">peek</a></span><span class="op">(</span><span class="va">df</span>,n<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            species   tl       PSD      PSD1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         Bluegill   42  substock  substock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18        Bluegill  120     stock     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 Largemouth Bass  491 preferred preferred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54 Largemouth Bass  293     stock     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 72    Bluefin Tuna 2476      &lt;NA&gt;      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90    Bluefin Tuna 1551      &lt;NA&gt;      &lt;NA&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#----- Add variable using length values as names</span></span></span>
<span class="r-in"><span><span class="co">#      Also turned off messaging of fish not in PSDlit</span></span></span>
<span class="r-in"><span><span class="va">df</span><span class="op">$</span><span class="va">PSD2</span> <span class="op">&lt;-</span> <span class="fu">psdAdd</span><span class="op">(</span><span class="va">tl</span><span class="op">~</span><span class="va">species</span>,data<span class="op">=</span><span class="va">df</span>,use.names<span class="op">=</span><span class="cn">FALSE</span>,verbose<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="peek.html">peek</a></span><span class="op">(</span><span class="va">df</span>,n<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            species   tl       PSD      PSD1 PSD2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         Bluegill   42  substock  substock    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18        Bluegill  120     stock     stock   80</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 Largemouth Bass  491 preferred preferred  380</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54 Largemouth Bass  293     stock     stock  200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 72    Bluefin Tuna 2476      &lt;NA&gt;      &lt;NA&gt;   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90    Bluefin Tuna 1551      &lt;NA&gt;      &lt;NA&gt;   NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#----- Same as above but using dplyr</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>PSD1A<span class="op">=</span><span class="fu">psdAdd</span><span class="op">(</span><span class="va">tl</span>,<span class="va">species</span>,verbose<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           PSD2A<span class="op">=</span><span class="fu">psdAdd</span><span class="op">(</span><span class="va">tl</span>,<span class="va">species</span>,use.names<span class="op">=</span><span class="cn">FALSE</span>,verbose<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="peek.html">peek</a></span><span class="op">(</span><span class="va">df</span>,n<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            species   tl       PSD      PSD1 PSD2     PSD1A PSD2A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         Bluegill   42  substock  substock    0  substock     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18        Bluegill  120     stock     stock   80     stock    80</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 Largemouth Bass  491 preferred preferred  380 preferred   380</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54 Largemouth Bass  293     stock     stock  200     stock   200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 72    Bluefin Tuna 2476      &lt;NA&gt;      &lt;NA&gt;   NA      &lt;NA&gt;    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90    Bluefin Tuna 1551      &lt;NA&gt;      &lt;NA&gt;   NA      &lt;NA&gt;    NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#===== Adding lengths besides the Gabelhouse lengths</span></span></span>
<span class="r-in"><span><span class="co">#----- Add a "minimum length" for Bluegill</span></span></span>
<span class="r-in"><span><span class="va">df</span><span class="op">$</span><span class="va">PSD3</span> <span class="op">&lt;-</span> <span class="fu">psdAdd</span><span class="op">(</span><span class="va">tl</span><span class="op">~</span><span class="va">species</span>,data<span class="op">=</span><span class="va">df</span>,verbose<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                  addLens<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Bluegill"</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"minLen"</span><span class="op">=</span><span class="fl">175</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span><span class="op">$</span><span class="va">PSD3A</span> <span class="op">&lt;-</span> <span class="fu">psdAdd</span><span class="op">(</span><span class="va">tl</span><span class="op">~</span><span class="va">species</span>,data<span class="op">=</span><span class="va">df</span>,verbose<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                   addLens<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Bluegill"</span><span class="op">=</span><span class="fl">175</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span><span class="op">$</span><span class="va">PSD3B</span> <span class="op">&lt;-</span> <span class="fu">psdAdd</span><span class="op">(</span><span class="va">tl</span><span class="op">~</span><span class="va">species</span>,data<span class="op">=</span><span class="va">df</span>,verbose<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                   addLens<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Bluegill"</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"minLen"</span><span class="op">=</span><span class="fl">175</span><span class="op">)</span><span class="op">)</span>,use.names<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span>,n<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    species  tl      PSD     PSD1 PSD2    PSD1A PSD2A     PSD3    PSD3A PSD3B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Bluegill  42 substock substock    0 substock     0 substock substock     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Bluegill  73 substock substock    0 substock     0 substock substock     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Bluegill 152  quality  quality  150  quality   150  quality  quality   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Bluegill 184  quality  quality  150  quality   150   minLen      175   175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Bluegill 167  quality  quality  150  quality   150  quality  quality   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Bluegill  94    stock    stock   80    stock    80    stock    stock    80</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#----- Add add'l lengths and names for Bluegill and Largemouth Bass</span></span></span>
<span class="r-in"><span><span class="va">df</span><span class="op">$</span><span class="va">psd4</span> <span class="op">&lt;-</span> <span class="fu">psdAdd</span><span class="op">(</span><span class="va">tl</span><span class="op">~</span><span class="va">species</span>,data<span class="op">=</span><span class="va">df</span>,verbose<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                  addLens<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Bluegill"</span><span class="op">=</span><span class="fl">175</span>,</span></span>
<span class="r-in"><span>                               <span class="st">"Largemouth Bass"</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">254</span>,<span class="fl">356</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="peek.html">peek</a></span><span class="op">(</span><span class="va">df</span>,n<span class="op">=</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            species   tl       PSD      PSD1 PSD2     PSD1A PSD2A      PSD3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         Bluegill   42  substock  substock    0  substock     0  substock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         Bluegill  167   quality   quality  150   quality   150   quality</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         Bluegill   86     stock     stock   80     stock    80     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        Bluegill  124     stock     stock   80     stock    80     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19        Bluegill  155   quality   quality  150   quality   150   quality</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24        Bluegill  108     stock     stock   80     stock    80     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28        Bluegill   94     stock     stock   80     stock    80     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 Largemouth Bass  433 preferred preferred  380 preferred   380 preferred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38 Largemouth Bass  293     stock     stock  200     stock   200     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43 Largemouth Bass  396 preferred preferred  380 preferred   380 preferred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47 Largemouth Bass  268     stock     stock  200     stock   200     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52 Largemouth Bass  279     stock     stock  200     stock   200     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57 Largemouth Bass  345   quality   quality  300   quality   300   quality</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62    Bluefin Tuna 2064      &lt;NA&gt;      &lt;NA&gt;   NA      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66    Bluefin Tuna 2273      &lt;NA&gt;      &lt;NA&gt;   NA      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 71    Bluefin Tuna 1785      &lt;NA&gt;      &lt;NA&gt;   NA      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 76    Bluefin Tuna 1596      &lt;NA&gt;      &lt;NA&gt;   NA      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 81    Bluefin Tuna 1692      &lt;NA&gt;      &lt;NA&gt;   NA      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 85    Bluefin Tuna 1997      &lt;NA&gt;      &lt;NA&gt;   NA      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90    Bluefin Tuna 1551      &lt;NA&gt;      &lt;NA&gt;   NA      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        PSD3A PSD3B      psd4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   substock     0  substock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    quality   150   quality</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      stock    80     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     stock    80     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19   quality   150   quality</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24     stock    80     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28     stock    80     stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 preferred   380 preferred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38     stock   200       254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43 preferred   380 preferred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47     stock   200       254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52     stock   200       254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57   quality   300   quality</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 71      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 76      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 81      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 85      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90      &lt;NA&gt;    NA      &lt;NA&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#===== Example for a species with sub-groups</span></span></span>
<span class="r-in"><span><span class="va">dbt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>species<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Brown Trout"</span><span class="op">)</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  tl<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">30</span>,<span class="fl">230</span>,<span class="fl">50</span><span class="op">)</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dlt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>species<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lake Trout"</span><span class="op">)</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  tl<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">30</span>,<span class="fl">550</span>,<span class="fl">60</span><span class="op">)</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">dbt</span>,<span class="va">dlt</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df2</span><span class="op">$</span><span class="va">psd</span> <span class="op">&lt;-</span> <span class="fu">psdAdd</span><span class="op">(</span><span class="va">tl</span><span class="op">~</span><span class="va">species</span>,data<span class="op">=</span><span class="va">df2</span>,group<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Brown Trout"</span><span class="op">=</span><span class="st">"lentic"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="peek.html">peek</a></span><span class="op">(</span><span class="va">df2</span>,n<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        species  tl      psd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  Brown Trout 194 substock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Brown Trout 215    stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 Brown Trout 241    stock</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36  Lake Trout 629  quality</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48  Lake Trout 536  quality</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 60  Lake Trout 571  quality</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="http://derekogle.com" class="external-link">Derek H. Ogle</a>, Jason C. Doll, A. Powell Wheeler, Alexis Dinno.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

